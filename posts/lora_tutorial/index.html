<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="LoRa教程" /><meta name="author" content="前尘逐梦" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="1. 概览 LoRa技术是一种广域网无线通信技术。基于LoRa无线通信技术的网络有多种不同的频段：902-928Hz（美国）、863-928Hz（欧盟）、779-787Hz（中国）等。LoRa是一种低功耗、长距离以及低通信速率的技术，最初由Samtech开发。 LoRa网络由网关、网络服务器以及终端设备组成，类型为星型。在LoRa网络系统中，终端设备也被称为motes，网关也被称为基站（base stations）或者集中器（concentratrators）。 终端和网关使用特定的ISM频段进行单跳连接。网关和网络服务器之间通过Ip回程线路连接（IP backhaul）。 上图描绘了LoRa网络的架构。客户信息数据库位于服务器中。终端设备和网关通过不同的信道和数据传输速率通信。LoRa支持的数据传输速率为0.3 Kbps - 50 Kbps。 2. LoRa 帧结构 从终端到网关的通信被称为上行链路（uplink），从网关到终端的通信被称为下行链路（downlink）。LoRaWAN支持不同类型的终端：A类，B类，C类。 如上图所示，LoRa帧由上行链路部分和下行链路部分组成。在Class A中，LoRa帧有一个上行链路槽，其后是两个下行链路槽。LoRa帧基于TDD技术。更多LoRa类别参见LoRa类别章节。 3. LoRa 协议栈 上图为Lora协议栈结构图。LoRa协议栈由应用层、介质访问控制层、物理层以及RF层组成。 被用来在终端和网关之间建立连接的、来自应用层的数据以及MAC命令，由MAC payload传输。 MAC层利用MAC payload制作MAC帧。 PHY层使用MAC作为PHY payload，并且在插入前导码、PHY报头、PHY报头循环冗余校验以及整个数据帧的循环冗余校验后用其制作PHY payload。 RF层按照需要将PHY帧调制为需要的ISM Rf载波，并且将其发射到空中。 注意：本文中的内容取自2015年有LoRa联盟发布的《LoRaWAN Specification V1.0》。 4. LoRa 频段 LoRa无线系统在不同地区（例如：美国、欧盟、中国）使用不同的频段。下表列出了LoRa频段以及LoRa信道频率。需要注意的是，网关和终端都可以使用相同的频率配合不同的时间槽来传送数据，这个概念称为TDD。 地区 LoRa频段 LoRa信道频率 欧盟 863 to 870 MHz 868.10 Mhz (used by Gateway to listen ) 868.30 MHz (used by Gateway to listen ) 868.50 MHz (used by Gateway to listen ) 864.10 MHz (used by End device to transmit Join Request) 864.30 MHz (used by End device to transmit Join Request) 864.50 MHz (used by End device to transmit Join Request) 868.10 MHz (used by End device to transmit Join Request) 868.30 MHz (used by End device to transmit Join Request) 868.50 MHz (used by End device to transmit Join Request) 美国 902 to 928 MHz 902.3 MHz to 914.9 MHz spaced at 200KHz (Upstream-64 channels) 903 MHz to 914.2 MHz spaced at 1.6 MHz apart (Upstream- 8 channels) 923.3 MHz to 927.5 MHz spaced at 600KHz apart (Downstream- 8 channels) 中国 779 to 787 MHz 779.5 MHz (Default channel) 779.7 MHz (Default channel) 779.9 MHz (Default channel) 779.5 MHz (Used by ED to transmit Join Request) 779.7 MHz (Used by ED to transmit Join Request) 779.9 MHz (Used by ED to transmit Join Request) 780.5 MHz (Used by ED to transmit Join Request) 780.7 MHz (Used by ED to transmit Join Request) 780.9 MHz (Used by ED to transmit Join Request) 欧洲电信标准化协会（ETSI）为LoRa定义了433 MHz到434 MHz的频段，信道频率为433.175 MHz、433.375 Mhz以及433.575 MHz。在欧洲的频段中，Class B终端使用869.525 Mhz的信道。 参考 [1] https://www.rfwireless-world.com/Tutorials/LoRa-tutorial.html [2] https://www.rfwireless-world.com/Tutorials/LoRa-frequency-bands.html" /><meta property="og:description" content="1. 概览 LoRa技术是一种广域网无线通信技术。基于LoRa无线通信技术的网络有多种不同的频段：902-928Hz（美国）、863-928Hz（欧盟）、779-787Hz（中国）等。LoRa是一种低功耗、长距离以及低通信速率的技术，最初由Samtech开发。 LoRa网络由网关、网络服务器以及终端设备组成，类型为星型。在LoRa网络系统中，终端设备也被称为motes，网关也被称为基站（base stations）或者集中器（concentratrators）。 终端和网关使用特定的ISM频段进行单跳连接。网关和网络服务器之间通过Ip回程线路连接（IP backhaul）。 上图描绘了LoRa网络的架构。客户信息数据库位于服务器中。终端设备和网关通过不同的信道和数据传输速率通信。LoRa支持的数据传输速率为0.3 Kbps - 50 Kbps。 2. LoRa 帧结构 从终端到网关的通信被称为上行链路（uplink），从网关到终端的通信被称为下行链路（downlink）。LoRaWAN支持不同类型的终端：A类，B类，C类。 如上图所示，LoRa帧由上行链路部分和下行链路部分组成。在Class A中，LoRa帧有一个上行链路槽，其后是两个下行链路槽。LoRa帧基于TDD技术。更多LoRa类别参见LoRa类别章节。 3. LoRa 协议栈 上图为Lora协议栈结构图。LoRa协议栈由应用层、介质访问控制层、物理层以及RF层组成。 被用来在终端和网关之间建立连接的、来自应用层的数据以及MAC命令，由MAC payload传输。 MAC层利用MAC payload制作MAC帧。 PHY层使用MAC作为PHY payload，并且在插入前导码、PHY报头、PHY报头循环冗余校验以及整个数据帧的循环冗余校验后用其制作PHY payload。 RF层按照需要将PHY帧调制为需要的ISM Rf载波，并且将其发射到空中。 注意：本文中的内容取自2015年有LoRa联盟发布的《LoRaWAN Specification V1.0》。 4. LoRa 频段 LoRa无线系统在不同地区（例如：美国、欧盟、中国）使用不同的频段。下表列出了LoRa频段以及LoRa信道频率。需要注意的是，网关和终端都可以使用相同的频率配合不同的时间槽来传送数据，这个概念称为TDD。 地区 LoRa频段 LoRa信道频率 欧盟 863 to 870 MHz 868.10 Mhz (used by Gateway to listen ) 868.30 MHz (used by Gateway to listen ) 868.50 MHz (used by Gateway to listen ) 864.10 MHz (used by End device to transmit Join Request) 864.30 MHz (used by End device to transmit Join Request) 864.50 MHz (used by End device to transmit Join Request) 868.10 MHz (used by End device to transmit Join Request) 868.30 MHz (used by End device to transmit Join Request) 868.50 MHz (used by End device to transmit Join Request) 美国 902 to 928 MHz 902.3 MHz to 914.9 MHz spaced at 200KHz (Upstream-64 channels) 903 MHz to 914.2 MHz spaced at 1.6 MHz apart (Upstream- 8 channels) 923.3 MHz to 927.5 MHz spaced at 600KHz apart (Downstream- 8 channels) 中国 779 to 787 MHz 779.5 MHz (Default channel) 779.7 MHz (Default channel) 779.9 MHz (Default channel) 779.5 MHz (Used by ED to transmit Join Request) 779.7 MHz (Used by ED to transmit Join Request) 779.9 MHz (Used by ED to transmit Join Request) 780.5 MHz (Used by ED to transmit Join Request) 780.7 MHz (Used by ED to transmit Join Request) 780.9 MHz (Used by ED to transmit Join Request) 欧洲电信标准化协会（ETSI）为LoRa定义了433 MHz到434 MHz的频段，信道频率为433.175 MHz、433.375 Mhz以及433.575 MHz。在欧洲的频段中，Class B终端使用869.525 Mhz的信道。 参考 [1] https://www.rfwireless-world.com/Tutorials/LoRa-tutorial.html [2] https://www.rfwireless-world.com/Tutorials/LoRa-frequency-bands.html" /><link rel="canonical" href="https://qianchenzhumeng.github.io/posts/lora_tutorial/" /><meta property="og:url" content="https://qianchenzhumeng.github.io/posts/lora_tutorial/" /><meta property="og:site_name" content="前尘逐梦" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-06-11T15:18:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="LoRa教程" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"前尘逐梦"},"description":"1. 概览 LoRa技术是一种广域网无线通信技术。基于LoRa无线通信技术的网络有多种不同的频段：902-928Hz（美国）、863-928Hz（欧盟）、779-787Hz（中国）等。LoRa是一种低功耗、长距离以及低通信速率的技术，最初由Samtech开发。 LoRa网络由网关、网络服务器以及终端设备组成，类型为星型。在LoRa网络系统中，终端设备也被称为motes，网关也被称为基站（base stations）或者集中器（concentratrators）。 终端和网关使用特定的ISM频段进行单跳连接。网关和网络服务器之间通过Ip回程线路连接（IP backhaul）。 上图描绘了LoRa网络的架构。客户信息数据库位于服务器中。终端设备和网关通过不同的信道和数据传输速率通信。LoRa支持的数据传输速率为0.3 Kbps - 50 Kbps。 2. LoRa 帧结构 从终端到网关的通信被称为上行链路（uplink），从网关到终端的通信被称为下行链路（downlink）。LoRaWAN支持不同类型的终端：A类，B类，C类。 如上图所示，LoRa帧由上行链路部分和下行链路部分组成。在Class A中，LoRa帧有一个上行链路槽，其后是两个下行链路槽。LoRa帧基于TDD技术。更多LoRa类别参见LoRa类别章节。 3. LoRa 协议栈 上图为Lora协议栈结构图。LoRa协议栈由应用层、介质访问控制层、物理层以及RF层组成。 被用来在终端和网关之间建立连接的、来自应用层的数据以及MAC命令，由MAC payload传输。 MAC层利用MAC payload制作MAC帧。 PHY层使用MAC作为PHY payload，并且在插入前导码、PHY报头、PHY报头循环冗余校验以及整个数据帧的循环冗余校验后用其制作PHY payload。 RF层按照需要将PHY帧调制为需要的ISM Rf载波，并且将其发射到空中。 注意：本文中的内容取自2015年有LoRa联盟发布的《LoRaWAN Specification V1.0》。 4. LoRa 频段 LoRa无线系统在不同地区（例如：美国、欧盟、中国）使用不同的频段。下表列出了LoRa频段以及LoRa信道频率。需要注意的是，网关和终端都可以使用相同的频率配合不同的时间槽来传送数据，这个概念称为TDD。 地区 LoRa频段 LoRa信道频率 欧盟 863 to 870 MHz 868.10 Mhz (used by Gateway to listen ) 868.30 MHz (used by Gateway to listen ) 868.50 MHz (used by Gateway to listen ) 864.10 MHz (used by End device to transmit Join Request) 864.30 MHz (used by End device to transmit Join Request) 864.50 MHz (used by End device to transmit Join Request) 868.10 MHz (used by End device to transmit Join Request) 868.30 MHz (used by End device to transmit Join Request) 868.50 MHz (used by End device to transmit Join Request) 美国 902 to 928 MHz 902.3 MHz to 914.9 MHz spaced at 200KHz (Upstream-64 channels) 903 MHz to 914.2 MHz spaced at 1.6 MHz apart (Upstream- 8 channels) 923.3 MHz to 927.5 MHz spaced at 600KHz apart (Downstream- 8 channels) 中国 779 to 787 MHz 779.5 MHz (Default channel) 779.7 MHz (Default channel) 779.9 MHz (Default channel) 779.5 MHz (Used by ED to transmit Join Request) 779.7 MHz (Used by ED to transmit Join Request) 779.9 MHz (Used by ED to transmit Join Request) 780.5 MHz (Used by ED to transmit Join Request) 780.7 MHz (Used by ED to transmit Join Request) 780.9 MHz (Used by ED to transmit Join Request) 欧洲电信标准化协会（ETSI）为LoRa定义了433 MHz到434 MHz的频段，信道频率为433.175 MHz、433.375 Mhz以及433.575 MHz。在欧洲的频段中，Class B终端使用869.525 Mhz的信道。 参考 [1] https://www.rfwireless-world.com/Tutorials/LoRa-tutorial.html [2] https://www.rfwireless-world.com/Tutorials/LoRa-frequency-bands.html","headline":"LoRa教程","dateModified":"2021-02-17T15:39:39+08:00","datePublished":"2017-06-11T15:18:00+08:00","url":"https://qianchenzhumeng.github.io/posts/lora_tutorial/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://qianchenzhumeng.github.io/posts/lora_tutorial/"},"@context":"https://schema.org"}</script><title>LoRa教程 | 前尘逐梦</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://cdn.jsdelivr.net/gh/cotes2020/chirpy-images/commons/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">前尘逐梦</a></div><div class="site-subtitle font-italic"></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/qianchenzhumeng" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['qianchenzhumeng','live.cn'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <a href="https://www.thingiverse.com/mikeyu/designs" aria-label="" class="order-6" target="_blank" rel="noopener"> <i class="fas fa-cube"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>LoRa教程</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>LoRa教程</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Jun 11, 2017, 3:18 PM +0800" > Jun 11, 2017 <i class="unloaded">2017-06-11T15:18:00+08:00</i> </span> by <span class="author"> 前尘逐梦 </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Feb 17, 2021, 3:39 PM +0800" > Feb 17, 2021 <i class="unloaded">2021-02-17T15:39:39+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="931 words">5 min</span></div></div><div class="post-content"><h2 id="1-概览">1. 概览</h2><p>LoRa技术是一种广域网无线通信技术。基于LoRa无线通信技术的网络有多种不同的频段：902-928Hz（美国）、863-928Hz（欧盟）、779-787Hz（中国）等。LoRa是一种低功耗、长距离以及低通信速率的技术，最初由Samtech开发。</p><p>LoRa网络由网关、网络服务器以及终端设备组成，类型为星型。在LoRa网络系统中，终端设备也被称为motes，网关也被称为基站（base stations）或者集中器（concentratrators）。</p><p>终端和网关使用特定的ISM频段进行单跳连接。网关和网络服务器之间通过Ip回程线路连接（IP backhaul）。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2017-06-11-lora_tutorial.assets/lora_network_architecture.png" alt="lora_network_architecture" /></p><p>上图描绘了LoRa网络的架构。客户信息数据库位于服务器中。终端设备和网关通过不同的信道和数据传输速率通信。LoRa支持的数据传输速率为0.3 Kbps - 50 Kbps。</p><h2 id="2-lora-帧结构">2. LoRa 帧结构</h2><p>从终端到网关的通信被称为上行链路（uplink），从网关到终端的通信被称为下行链路（downlink）。LoRaWAN支持不同类型的终端：A类，B类，C类。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2017-06-11-lora_tutorial.assets/lora_classes.jpg" alt="lora_classes" /></p><p>如上图所示，LoRa帧由上行链路部分和下行链路部分组成。在Class A中，LoRa帧有一个上行链路槽，其后是两个下行链路槽。LoRa帧基于TDD技术。更多LoRa类别参见LoRa类别章节。</p><h2 id="3-lora-协议栈">3. LoRa 协议栈</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2017-06-11-lora_tutorial.assets/lora_protocol_stack.jpg" alt="lora_protocol_stack" /></p><p>上图为Lora协议栈结构图。LoRa协议栈由应用层、介质访问控制层、物理层以及RF层组成。</p><ul><li>被用来在终端和网关之间建立连接的、来自应用层的数据以及MAC命令，由MAC payload传输。<li>MAC层利用MAC payload制作MAC帧。<li>PHY层使用MAC作为PHY payload，并且在插入前导码、PHY报头、PHY报头循环冗余校验以及整个数据帧的循环冗余校验后用其制作PHY payload。<li>RF层按照需要将PHY帧调制为需要的ISM Rf载波，并且将其发射到空中。</ul><p>注意：本文中的内容取自2015年有LoRa联盟发布的《LoRaWAN Specification V1.0》。</p><h2 id="4-lora-频段">4. LoRa 频段</h2><p>LoRa无线系统在不同地区（例如：美国、欧盟、中国）使用不同的频段。下表列出了LoRa频段以及LoRa信道频率。需要注意的是，网关和终端都可以使用相同的频率配合不同的时间槽来传送数据，这个概念称为TDD。</p><div class="table-wrapper"><table><thead><tr><th>地区<th>LoRa频段<th>LoRa信道频率<tbody><tr><td>欧盟<td>863 to 870 MHz<td>868.10 Mhz (used by Gateway to listen ) 868.30 MHz (used by Gateway to listen ) 868.50 MHz (used by Gateway to listen ) 864.10 MHz (used by End device to transmit Join Request) 864.30 MHz (used by End device to transmit Join Request) 864.50 MHz (used by End device to transmit Join Request) 868.10 MHz (used by End device to transmit Join Request) 868.30 MHz (used by End device to transmit Join Request) 868.50 MHz (used by End device to transmit Join Request)<tr><td>美国<td>902 to 928 MHz<td>902.3 MHz to 914.9 MHz spaced at 200KHz (Upstream-64 channels) 903 MHz to 914.2 MHz spaced at 1.6 MHz apart (Upstream- 8 channels) 923.3 MHz to 927.5 MHz spaced at 600KHz apart (Downstream- 8 channels)<tr><td>中国<td>779 to 787 MHz<td>779.5 MHz (Default channel) 779.7 MHz (Default channel) 779.9 MHz (Default channel) 779.5 MHz (Used by ED to transmit Join Request) 779.7 MHz (Used by ED to transmit Join Request) 779.9 MHz (Used by ED to transmit Join Request) 780.5 MHz (Used by ED to transmit Join Request) 780.7 MHz (Used by ED to transmit Join Request) 780.9 MHz (Used by ED to transmit Join Request)</table></div><p>欧洲电信标准化协会（ETSI）为LoRa定义了433 MHz到434 MHz的频段，信道频率为433.175 MHz、433.375 Mhz以及433.575 MHz。在欧洲的频段中，Class B终端使用869.525 Mhz的信道。</p><h2 id="参考">参考</h2><p>[1] <a href="https://www.rfwireless-world.com/Tutorials/LoRa-tutorial.html">https://www.rfwireless-world.com/Tutorials/LoRa-tutorial.html</a></p><p>[2] <a href="https://www.rfwireless-world.com/Tutorials/LoRa-frequency-bands.html">https://www.rfwireless-world.com/Tutorials/LoRa-frequency-bands.html</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/iot/'>IoT</a>, <a href='/categories/lora/'>LoRa</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/lora/" class="post-tag no-text-decoration" >LoRa</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=LoRa教程 - 前尘逐梦&url=https://qianchenzhumeng.github.io/posts/lora_tutorial/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=LoRa教程 - 前尘逐梦&u=https://qianchenzhumeng.github.io/posts/lora_tutorial/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=LoRa教程 - 前尘逐梦&url=https://qianchenzhumeng.github.io/posts/lora_tutorial/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://qianchenzhumeng.github.io/posts/lora_tutorial/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=LoRa教程 - 前尘逐梦&url=https://qianchenzhumeng.github.io/posts/lora_tutorial/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/mq-r-f133_develop_guide/">芒果派 MQ-R F133 开发指南</a><li><a href="/posts/gui_development_with_rust_and_gtk4_on_windows/">Windows 下使用 Rust 和 GTK4 创建 GUI 程序</a><li><a href="/posts/modern_robotics_mechanics_planning_and_Control/">Modern Robotics: Mechanics, Planning, and Control</a><li><a href="/posts/rust_notes/">Rust 笔记</a><li><a href="/posts/generate_manufacturing_data_from_eagle/">Eagle 输出 PCB 制造数据</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/mqtt/">MQTT</a> <a class="post-tag" href="/tags/openwrt/">OpenWrt</a> <a class="post-tag" href="/tags/rust/">Rust</a> <a class="post-tag" href="/tags/thingsboard/">ThingsBoard</a> <a class="post-tag" href="/tags/contiki/">Contiki</a> <a class="post-tag" href="/tags/esp8266/">ESP8266</a> <a class="post-tag" href="/tags/stm8/">STM8</a> <a class="post-tag" href="/tags/inventory-management/">Inventory Management</a> <a class="post-tag" href="/tags/iot/">IoT</a> <a class="post-tag" href="/tags/other/">Other</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Mosquitto%E7%AC%94%E8%AE%B0/"><div class="card-body"> <span class="timeago small" > Mar 29, 2016 <i class="unloaded">2016-03-29T00:09:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Mosquitto 笔记</h3><div class="text-muted small"><p> 1. MQTT MQTT（MQ Telemetry Transport）是轻量级的消息传输协议，它允许设备高效地通过受限网络与远程系统进行异步通信。 MQTT的特点 发布/订阅模式可以提供一对多的消息发布，解除了应用程序之间的耦合 消息传输屏蔽了报文的内容 使用TCP/IP提供基本的网络连接 三种用于消息分发的...</p></div></div></a></div><div class="card"> <a href="/posts/MQTT-Embeded%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-publish/"><div class="card-body"> <span class="timeago small" > Mar 30, 2016 <i class="unloaded">2016-03-30T15:45:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MQTT Embeded 学习笔记（发布消息）</h3><div class="text-muted small"><p> 1. Paho Eclipse 的 Paho 项目旨在提供可伸缩的开放和标准的 Machine-to-Machine (M2M) 以及物联网消息协议的开源实现。Paho 提供了许多不同版本的 MQTT client 以供不同平台使用。其中，Embedded MQTT C/C++ Client Libraries 是为嵌入式平台提供的，可以将其用在 mbed、Arduino、FreeRTOS...</p></div></div></a></div><div class="card"> <a href="/posts/MQTT_V3_1_1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%89%A9%E4%BD%99%E9%95%BF%E5%BA%A6%E7%BC%96%E7%A0%81%E8%A7%84%E5%88%99/"><div class="card-body"> <span class="timeago small" > Apr 6, 2016 <i class="unloaded">2016-04-06T18:21:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MQTT V3.1.1学习笔记（剩余长度编码规则）</h3><div class="text-muted small"><p> 固定报头中的剩余长度是指当前数据包中剩余的字节数，包括可变报头及有效荷载。剩余长度字段从第二个字节起，数据储存遵循大端模式（高字节在前，低字节在后）。对于长度小于等于127个字节的消息，可变程度编码方案使用一个单独的字节。长度大于127个字节的消息，使用如下方案处理：每个字节的最低的7位编码数据（最大为127），最高位用来指明还有后续字节。可变长度区域所用的最大字节数为4。能代表的最大的数为...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Contiki-OS-for-cc2530F256/" class="btn btn-outline-primary" prompt="Older"><p>Contiki OS for cc2530F256</p></a> <a href="/posts/Contiki%E5%8A%9F%E8%80%97%E8%AF%84%E4%BC%B0/" class="btn btn-outline-primary" prompt="Newer"><p>Contiki 功耗评估</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/qianchenzhumeng">前尘逐梦</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/mqtt/">MQTT</a> <a class="post-tag" href="/tags/openwrt/">OpenWrt</a> <a class="post-tag" href="/tags/rust/">Rust</a> <a class="post-tag" href="/tags/thingsboard/">ThingsBoard</a> <a class="post-tag" href="/tags/contiki/">Contiki</a> <a class="post-tag" href="/tags/esp8266/">ESP8266</a> <a class="post-tag" href="/tags/stm8/">STM8</a> <a class="post-tag" href="/tags/inventory-management/">Inventory Management</a> <a class="post-tag" href="/tags/iot/">IoT</a> <a class="post-tag" href="/tags/other/">Other</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?0dfbba74f4bbf4feedaaf402fbae1dd8"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://qianchenzhumeng.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
